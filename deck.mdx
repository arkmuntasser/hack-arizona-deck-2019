import { Head } from 'mdx-deck'
import { CodeSurfer } from "mdx-deck-code-surfer"

export { swiss as theme } from 'mdx-deck/themes'

<Head>
  <title>Building a Scalable Component Library</title>
</Head>

# Building a Scalable Component Library

---

SaaSy Components

---

Simpleview
We build websites

---

54
websites built and launched in 2018

---

Simpleview Component Library

---

Amir R Muntasser
Senior Developer Lead of CMS Operations

twitter: @arkmuntasser github: @arkmuntasser website: arkm.xyz

---

import { Appear } from 'mdx-deck'

Goals for our Component Library

<ul>
  <Appear>
    <li>Tightly integrated with our CMS.</li>
    <li>Provide a better experience for our developers.</li>
    <li>Improve code quality and accessibility on our sites.</li>
    <li>Give us a SaaS front end to match our SaaS back end.</li>
  </Appear>
</ul>

---

## Writing Better Code Made Easy

---

Code examples are NOT production ready.

---

### Links

---

<CodeSurfer
  title="Links are easy!"
  code={require("!raw-loader!./snippets/link-example-basic.html")}
  lang="html"
  showNumbers={false}
  dark={false}
/>

---

But it's missing attributes like:

<ul>
  <Appear>
    <li>target</li>
    <li>rel</li>
    <li>title</li>
  </Appear>
</ul>

---

Components can and should be used to enforce best practices/accessibility.

---

<CodeSurfer
  title="hyperlink component"
  code={require("!raw-loader!./snippets/hyperlink.vue")}
  lang="html"
  showNumbers={false}
  dark={false}
  steps={[
    {},
    { range: [15, 18], notes: "A prop to pass through our link object from the CMS" },
    { range: [20, 33], notes: "Some computed properties to get our attribute values" },
    { range: [2, 9], notes: "We render a simple anchor with all attributes in place" }
  ]}
/>

---

<CodeSurfer
  title="Instead of writing this..."
  code={require("!raw-loader!./snippets/link-example-bad.html")}
  lang="html"
  showNumbers={false}
  dark={false}
/>

---

<CodeSurfer
  title="Devs can write this..."
  code={require("!raw-loader!./snippets/link-example-good.html")}
  lang="html"
  showNumbers={false}
  dark={false}
/>

---

### Images

---

<ul>
  <Appear>
    <li>No lazy-loading standard</li>
    <li>Didn't take advantage of picture tag to provide responsive images</li>
  </Appear>
</ul>

---

#### Lazy-loading

---

<CodeSurfer
  title="hyperimage component"
  code={require("!raw-loader!./snippets/hyperimage-lazy-loading.vue")}
  lang="html"
  showNumbers={false}
  dark={false}
  steps={[
    {},
    { range: [13, 14], notes: "On mounted, we setup an Intersection Observer" },
    { range: [17, 20], notes: "If the element is in the viewport, we flip the enteredViewport flag to true." },
    { lines: [2], notes: "When enteredViewport is true, we render the image." }
  ]}
/>

---

#### Responsive Images

---

<CodeSurfer
  title="hyperimage component"
  code={require("!raw-loader!./snippets/hyperimage-responsive.vue")}
  lang="html"
  showNumbers={false}
  dark={false}
  steps={[
    {},
    { range: [3, 6], notes: "We iterate over an array of sizes and set the sources" },
    { notes: "No more double checking MDN for how to use picture" }
  ]}
/>

---

<CodeSurfer
  title="Devs now write this..."
  code={require("!raw-loader!./snippets/image-example-good.html")}
  lang="html"
  showNumbers={false}
  dark={false}
/>

---

Awesome! Super helpful components!

---

But now what?

---

## A Saas Frontend to match our SaaS Backend

---

### Simpleview CMS
It's a SaaS (Software as a Service) platform!

---

#### The Focal Point Debacle

---

Focal point enabled the user to select the focus on an image so that cropping applied to the image would center around the focus.

---

Every client got it instantly and it was a totally smooth release...

---

...is what I would like to say

---

It required a very minor single line update to enable on the frontend

---

<Appear>
  <span>1 Line...&nbsp;</span>
  <span>per Widget...&nbsp;</span>
  <span>per Client...</span>
</Appear>

---

Roughly a dozen widget per sites...

---

And a few hundred clients...

---

Never again!

---

The hymperimage component to the rescue!

---

Components in our library live outside of the client's codebase and will get pushed to their sites.

---

Update the component once, and everyone gets it

---

It doesn't stop there!

---

Our component library contains these foundational components, as well as widgets, and apps.

---

Clients can now get regular frontend updates along with regular backend updates.

---

A component library at scale.

---

## Thank you!

Follow me: @arkmuntasser on Twitter and other internet places